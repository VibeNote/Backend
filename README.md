# VibeNote

VibeNote — это Android-приложение, позволяющее пользователям создавать и анализировать личные заметки с эмоциональным контекстом. Приложение поддерживает создание заметок, их синхронизацию с облаком, аутентификацию пользователей и анализ настроения текста. Данный раздел описывает серверную составляющую проекта

## Возможности

- Аутентификация пользователей (вход/регистрация)
- Создание и управление личными заметками
- Сохранение заметок в базе данных
- Анализ настроения содержимого заметок
- Управление профилем пользователя
- Swagger для запуска функциональностей проекта вручную

## Технологический стек

- **Язык**: .Net
- **Backend-фреймворк**: ASP.NET
- **Архитектура**: Модульная архитектура
- **База данных**: Postgres
- **ORM**: EntityFramework
- **Развертывание**: Docker Compose

## Установка проекта

### Необходимые компоненты

- Docker Compose

### Конфигурация

Переменные среды хранятся в корне проекта и находится в файле .env. Пример env файла:

```
PostgreSqlConfiguration__Host=localhost
PostgreSqlConfiguration__Port=5432
PostgreSqlConfiguration__Username=vibeNote-adm
PostgreSqlConfiguration__Password=vibeNote-password
PostgreSqlConfiguration__DatabaseName=vibeNote-db

TokenInfoConfiguration__Secret=11cd89e19da28c241699f8ecf7398c6b2db98c9a219bd901bde45d70ca1fc0792bb28047806e19e87022b499d7d9cd1f16f973e0d7e064b8715328ddd23055dbfb384a95b520611f845d41c6a67084d4fe5ae29d0978c9cdf07e8e3acc549c5c36e4693c1e604afa6b95e3fe44d4a41e86a269fc8376e91871ff56ca953c7b74c1baa281e182fd2f82fa5000cde8f31f5603f729b3918372ab9da009e86415392dd667da1404c9dc12a1ec933a51ecf25c8cd00893782eedc43a1176b23441e15a642a61c90e755db4af1acbe1d92651de82fdaffac6547cb242a1c1de9068a351d58967541ee070a6e321d8e800ee34e170660734b9754646df9d4668849a82
TokenInfoConfiguration__Issuer=Issuer
```

### Сборка проекта

1. Клонируйте репозиторий
2. Зайдите в корень проекта и в терминале запустите docker-compose build.
3. Ждете сборку (в 1-й раз собирается около 30 минут, тк собираются контейнеры с нейросетью)
4. Далее запускается docker-compose up
5. Сформированный Swagger по localhost:8511

## Архитектура

Проект построен по принципам Clean Architecture и включает следующие основные компоненты:

- **Presentaion слой**: контроллеры и модели, настройка проекта. Взаимодействует с UserService и Mediator
- **Application слой**: сервисы, контракты и их обработчики
- **Infrastrature слой**: взаимодействие с базой данных
- **Domain слой**: доменные сущности, исключения и перечеслимые типы

### Ключевые компоненты

- `Mediator`: прослойка между Presentaion и Application
- `DatabaseContext`: контекст взаимодействия с базой
- `UserService`: сервис аутентификации 
- `AnalyseService`: сервис взаимодействия с нейросетями

## Интеграция с API

Приложение взаимодействует с сервером для выполнения различных операций. Основные эндпоинты API определены в:

- `UserApi`: эндпоинты для аутентификации (вход, регистрация) или управления профилем
- `EntryApi`: эндпоинты для работы с заметками
- `AnalysisApi`: эндпоинты для взаимодействия с анализом
